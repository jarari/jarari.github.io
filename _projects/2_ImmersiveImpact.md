---
name: Immersive Impact
tools: [C++]
image: assets/immersiveimpact.png
description: >-
             엘더스크롤 5: 스카이림의 전투 시스템과 타격감을 개선하는 모드
---

# Immersive Impact

저는 스카이림을 레전더리 에디션 시절부터 약 2천시간 플레이했는데요. 할 때 마다 아쉬운 부분이 근접 전투가 아니었나 싶습니다. 특히 애니메이션의 퀄리티, 루트 모션의 미적용, 타격감의 부재가 문제였는데요. 이걸 해결하기 위해 밤낮없이 스카이림의 어셈블리 코드를 읽으며 관련 함수들의 메모리 오프셋을 정리하고, 저에게 필요한 함수들을 찾아서 기능을 바꾸거나 추가하여 만든게 이 Immersive Impact 입니다.<br>

<p class="text-center">
{% include elements/button.html link="https://github.com/jarari/ImmersiveImpactSE" text="프로젝트 GitHub" %}
</p>

### 애니메이션 - Telegraphing Attack

![공격 속도 보정](assets/immersiveimpact_speed.gif)

정말 미세한 차이지만, 스카이림 애니메이션의 전반적인 문제점은 모션의 커브가 굉장히 완만하다는 점입니다. 칼을 휘두를 때 강약의 차이 없이 일정한 속도로 움직이니 공격한다는 느낌이 들지 않았죠. 이를 해결하려면 아에 애니메이션을 전부 새로만드는게 최선이었는데,  저는 그 당시엔 모션 캡쳐 퀄리티만큼의 3인칭 애니메이션을 만들 자신도, 도구도 없었습니다. 그래서 생각해낸 방식이 이벤트 기반 공격 속도 보정입니다.<br>
<br>
보통 타격감이 좀 좋다는 평가를 받는 몬스터헌터나 소울류의 게임들을 보면  공격 모션의 전조 동작이 매우 크다는 것을 알 수 있습니다. 저희는 본능적으로 그 모션을 보고 "곧 공격이 온다." 라는 느낌을 받게 되며, 전조 동작의 길이가 길 수록 "더 강한 공격이 온다." 라는 느낌을 받죠. 이를 Telegraphing Attack 이라고 하는데요. 저는 캐릭터에 있는 애니메이션 이벤트 처리 가상함수를 제 함수로 덮어씌우는 방식을 이용하여 애니메이션 이벤트를 읽어오고 무기 타입, 현재 애니메이션 phase에 따라 공격 속도를 다이나믹하게 조절하는 방식으로 이를 구현하였습니다.<br>
<br>

### 타격감 - Hit Stop, Blur, Camera Shake

{% include elements/video.html id="0EzfUSYoKZE" %}

위 영상에는 제가 생각하는 타격감을 이루는 요소들이 모두 들어가 있습니다. 타격 순간 잠깐의 정지, 화면 블러, 그리고 카메라 쉐이크. 놀랍게도 스카이림 기본 게임에는 엔진에 기능이 다 있음에도 이 요소가 단 하나도 없어요. 그래서 저는 이 모든 요소를 무기 타입별로, 그리고 공격 타입에 따라 다른 강도로 적용되게 구현하였습니다. 추가로 컨트롤러 진동까지 넣어서 패드 유저들은 더 큰 타격감을 느낄 수 있도록 하였습니다.<br>
<br>

### 대쉬와 넉백

![대쉬](assets/immersiveimpact_dash.gif)
![넉백](assets/immersiveimpact_knockback.gif)

대쉬와 넉백 또한 타격감에 좋은 영향을 줍니다. 공격을 하는 순간, 그리고 공격이 맞는 순간 캐릭터가 큰 가속도를 받으면 플레이어도 무언가가 명중했다는 느낌을 받게 되죠. 하지만 스카이림의 캐릭터 컨트롤러 코드는 일반적인 게임들의 캐릭터 컨트롤러와 약간 달랐습니다. 땅 위에 있는 상태에서는 아무리 큰 가속도를 줘도 무시하도록 설정되어 있고, 공중에서는 조작을 가하면 무조건 고정된 속도로 움직이도록 설정되어 있었습니다. 그래서 저는 캐릭터 가속 시스템을 구현하여 땅 위의 캐릭터를 강제로 공중에 띄운 후 간단한 물리 연산을 통해 일정한 가속도가 적용되도록 만들었습니다.<br>
<br>

### 결과물

![결과물](assets/immersiveimpact_final.gif)
제가 구현한 결과물에 다른 애니메이터의 루트 모션 기반 공격 애니메이션까지 합치면<br>
스카이림의 전투는 이런 느낌으로 탈바꿈합니다.<br>
훨씬 재밌어보이죠?